<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>C/C++ Development Environment for Emacs</title>
<!-- 2016-12-09 Fri 12:23 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet"
          href="./static/worg.css" type="text/css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">C/C++ Development Environment for Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Introductory demos</a></li>
<li><a href="#sec-2">2. Setup</a></li>
<li><a href="#sec-3">3. Basic source code navigation</a></li>
<li><a href="#sec-4">4. Source code navigation</a></li>
<li><a href="#sec-5">5. Browse source tree with <code>Speedbar</code> file browser</a></li>
<li><a href="#sec-6">6. General completion with <code>company-mode</code></a></li>
<li><a href="#sec-7">7. Demo project</a></li>
<li><a href="#sec-8">8. Source code completion using Clang</a></li>
<li><a href="#sec-9">9. Header file completion with <code>company-c-headers</code> package</a></li>
<li><a href="#sec-10">10. CEDET</a></li>
<li><a href="#sec-11">11. Code refactoring</a></li>
<li><a href="#sec-12">12. Navigate system include path</a></li>
<li><a href="#sec-13">13. Project management with Projectile</a></li>
<li><a href="#sec-14">14. Source code information</a></li>
<li><a href="#sec-15">15. Source code documentation</a></li>
<li><a href="#sec-16">16. Source code editing</a></li>
<li><a href="#sec-17">17. Compilation Support</a></li>
<li><a href="#sec-18">18. Debugging</a></li>
</ul>
</div>
</div>
<p>
In this guide, I will help you to setup an efficient working C/C++
environment. Despite looking long, the setup is short and easy (mostly
copy/paste Emacs Lisp code into your <code>init.el</code>); most of the guide are
explanations and demonstrations of many useful features. Following
this guide, you should be able to browse the Linux kernel source tree
inside Emacs effortlessly, such as jump to definition/references at
cursor, go back and forth between jumping points, finding any file
instantly, switching between .h and .c/.cpp.
</p>

<p>
Please remember that there's a table of content on the top right
corner and you can use it to navigate this guide. If you feel your
internet connection is too slow for my guide, you can always clone and
read it offline: <a href="https://github.com/tuhdo/tuhdo.github.io">https://github.com/tuhdo/tuhdo.github.io</a>
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="introductory-demos" name="introductory-demos"></a><span class="section-number-2">1</span> Introductory demos</h2>
<div class="outline-text-2" id="text-1">
<p>
Here are some visual examples of the emacs IDE in action:
</p>

<ul class="org-ul">
<li>Switching between .h and .c/.cpp anywhere in the project like Linux
kernel. If more than one file exists, it displays a list of
possible candidates. The command collects files of the same names
but different across the project:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/projectile-find-other-file.gif"><img src="static/c-ide/projectile-find-other-file.gif" alt="projectile-find-other-file.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Jumping around Linux kernel source with ease using <code>helm-gtags</code>. The
demo begins when "START" appears at the bottom:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/helm-gtags-jump-dwim.gif"><img src="static/c-ide/helm-gtags-jump-dwim.gif" alt="helm-gtags-jump-dwim.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Interactive outline tree using <code>moo-jump-local</code> from <a href="https://github.com/abo-abo/function-args">function-args</a>
  package:


<div class="figure">
<p><a href="static/c-ide/moo-jump-local.gif"><img src="static/c-ide/moo-jump-local.gif" alt="moo-jump-local.gif" /></a>
</p>
</div>
</li>

<li>Static outline tree as a file browser:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/sr-speedbar.gif"><img src="static/c-ide/sr-speedbar.gif" alt="sr-speedbar.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Symbol references:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/semantic-symref.gif"><img src="static/c-ide/semantic-symref.gif" alt="semantic-symref.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Code completion 1:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/semantic-boost-demo.gif"><img src="static/c-ide/semantic-boost-demo.gif" alt="semantic-boost-demo.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Code completion 2:
</li>
</ul>


<div class="figure">
<p><a href="static/auto_complete.gif"><img src="static/auto_complete.gif" alt="auto_complete.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Header completion:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/company-c-header.png"><img src="static/c-ide/company-c-header.png" alt="company-c-header.png" /></a>
</p>
</div>

<ul class="org-ul">
<li>Show function interface and variable definition at the bottom:
</li>
</ul>


<div class="figure">
<p><a href="static/func_args.jpg"><img src="static/func_args.jpg" alt="func_args.jpg" /></a>
</p>
</div>


<div class="figure">
<p><a href="static/c-ide/semantic-idle-summary-lambda.gif"><img src="static/c-ide/semantic-idle-summary-lambda.gif" alt="semantic-idle-summary-lambda.gif" /></a>
</p>
</div>


<div class="figure">
<p><a href="static/c-ide/semantic-idle-summary-variable.gif"><img src="static/c-ide/semantic-idle-summary-variable.gif" alt="semantic-idle-summary-variable.gif" /></a>
</p>
</div>


<ul class="org-ul">
<li>Show current function your cursor is inside at the top:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/semantic-sticky-func.gif"><img src="static/c-ide/semantic-sticky-func.gif" alt="semantic-sticky-func.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Compilation support:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/compilation-mode.gif"><img src="static/c-ide/compilation-mode.gif" alt="compilation-mode.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Beautiful compile output:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/compilation-compile.gif"><img src="static/c-ide/compilation-compile.gif" alt="compilation-compile.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Fancy GDB debugging:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/gdb-many-windows.gif"><img src="static/c-ide/gdb-many-windows.gif" alt="gdb-many-windows.gif" /></a>
</p>
</div>

<ul class="org-ul">
<li>Getting man pages for symbol at cursor:
</li>
</ul>


<div class="figure">
<p><a href="static/part3/helm-man-woman.gif"><img src="static/part3/helm-man-woman.gif" alt="helm-man-woman.gif" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="setup" name="setup"></a><span class="section-number-2">2</span> Setup</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><a id="quick-setup" name="quick-setup"></a><span class="section-number-3">2.1</span> Quick setup</h3>
<div class="outline-text-3" id="text-2-1">

<p>
I've prepared a github repository (URL below) with the configuration
files to properly install and configure the components of the emacs
IDE, and with a sample C project to play with. When installed and run
the <span class="underline">first time</span>, the demo repository will download from MELPA,
install and compile all the packages it needs. Note that depending on
your internet connection and processor speeds, this may take a while,
but that shouldn't stop you from continuing with this guide; the next
section can be followed using a second instance of emacs, and without
the IDE components.
</p>

<p>
If you don't wish to use the github repository, you can manually
install the components, and use the <code>.el</code> files of the demo as a
reference sample configuration.
</p>

<p>
Steps to install the 'quick setup':
</p>

<ul class="org-ul">
<li>Install <a href="http://www.gnu.org/software/global">GNU Global</a> from your distribution's package manager (Linux /
Mac) or from the <a href="http://adoxa.altervista.org/global/">Win32 port</a> (Windows). If none is available,
download the source <a href="http://www.gnu.org/software/global/download.html">here</a> and manually build the package.
</li>
<li>If emacs is not already running, start it.
</li>
<li>Update your MELPA database: <code>M-x package-list-packages</code>. (reference:
<a href="emacs-tutor3.html">How to use Emacs package manager</a>).
</li>
<li>Get a local copy of the repository.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #cdcd00;"># </span><span style="color: #cdcd00;">Three ways. There are more...</span>
wget https://github.com/Boruch-Baum/emacs-c-ide-demo/archive/master.zip &amp;&amp; unzip master.zip
wget https://github.com/Boruch-Baum/emacs-c-ide-demo/archive/master.tar.gz &amp;&amp; tar -xf master.tar.gz
git clone --depth=1 https://github.com/Boruch-Baum/emacs-c-ide-demo.git
</pre>
</div>
<ul class="org-ul">
<li>Copy the sub-folder <code>emacs_ide_demo_config</code> into your <code>~/.emacs.d/</code>
  folder.
</li>
<li>The other sub-folder, <code>emacs_ide_demo_project</code> has a sample skeleton
project. Use it in place or copy it elsewhere as convenient.
</li>
<li>You may possibly want to make a change to your new
<code>~/.emacs.d/emacs_ide_demo_config/init.el</code> file. By default, the
demo uses <a href="https://github.com/emacs-helm/helm">helm</a> (<a href="http://tuhdo.github.io/helm-intro.html">reference</a>) and <a href="https://github.com/syohex/emacs-helm-gtags">helm-gtags</a>, but if you don't want to
use <code>helm</code>, the alternative is to use <code>ggtags</code>. Here's how to make
that change.

<ul class="org-ul">
<li>comment these lines in <code>init.el</code>:

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">setup-helm</span>)
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">setup-helm-gtags</span>)
</pre>
</div>

<p>
And uncomment this line:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">(require 'setup-ggtags)</span>
</pre>
</div>
</li>
</ul>
</li>

<li><code>M-x load-library RET emacs_ide_init</code>
</li>
</ul>

<p>
As mentioned earlier, the first time you load the library, it will
perform a series of downloads, installs and compiles, which may take a
while, but you can still continue with the next section of this guide
in a second instance of emacs, even without any of the IDE components.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><a id="not-so-quick-setup" name="not-so-quick-setup"></a><span class="section-number-3">2.2</span> Not-so-quick setup</h3>
<div class="outline-text-3" id="text-2-2">

<p>
If your operating system distribution has already prepared all or some of the emacs IDE components as packages, then it stands to reason that it recommends you use those instead of downloading from MELPA.
</p>

<p>
You can use your distribution's package manager to install any components so prepared, and afterwards perform the 'quick setup' instructions above.
</p>

<p>
If you use your distribution's package manager to install any components AFTER performing the 'quick setup', you will need to then manually delete the initially downloaded library from your <code>~/.emacs.d/elpa</code> folder.
</p>

<p>
The emacs ide components are:
</p>
<ul class="org-ul">
<li>TODO
</li>
</ul>

<p>
Let's use debian as an example linux distribution. At the time of this writing, debian had packaged the following components:
</p>
<ul class="org-ul">
<li>TODO
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="basic-navigation" name="basic-navigation"></a><span class="section-number-2">3</span> Basic source code navigation</h2>
<div class="outline-text-2" id="text-3">
<p>
Even without any IDE components installed, emacs already has features
useful for operating on source code.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" align="center">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Binding Function</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>C-M-f</b></td>
<td class="left"><code>forward-sexp</code></td>
<td class="left">move forward over a balanced  expression that can be a pair or a symbol.</td>
</tr>

<tr>
<td class="left"><b>C-M-b</b></td>
<td class="left"><code>backward-sexp</code></td>
<td class="left">move backward over a balanced  expression that can be a pair or a symbol.</td>
</tr>

<tr>
<td class="left"><b>C-M-k</b></td>
<td class="left"><code>kill-sexp</code></td>
<td class="left">kill balanced expression  forward that can be a pair or a symbol.</td>
</tr>

<tr>
<td class="left"><b>C-M-&lt;SPC&gt;</b> or <b>C-M-@</b></td>
<td class="left"><code>mark-sexp</code></td>
<td class="left">put mark after  following expression that can be a pair or a symbol.</td>
</tr>

<tr>
<td class="left"><b>C-M-a</b></td>
<td class="left"><code>beginning-of-defun</code></td>
<td class="left">move point to beginning of  a function.</td>
</tr>

<tr>
<td class="left"><b>C-M-e</b></td>
<td class="left"><code>end-of-defun</code></td>
<td class="left">move point to end of a  function.</td>
</tr>

<tr>
<td class="left"><b>C-M-h</b></td>
<td class="left"><code>mark-defun</code></td>
<td class="left">put a region around whole current  or following function.</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Demos</h3>
<div class="outline-text-3" id="text-3-1">
<table border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left"><b>C-M-f</b> runs <code>forward-sexp</code>, to move forward</td>
<td class="left">&#xa0;</td>
<td class="left"><b>C-M-b</b> runs <code>backward-sexp</code>, to move backward</td>
</tr>

<tr>
<td class="left">over a balanced expression that can be a pair or a symbol.</td>
<td class="left">&#xa0;</td>
<td class="left">over a balanced  expression that can be a pair or a symbol.</td>
</tr>

<tr>
<td class="left"><a href="static/c-ide/forward-func.gif"><img src="static/c-ide/forward-func.gif" alt="forward-func.gif" /></a></td>
<td class="left">&#xa0;</td>
<td class="left"><a href="static/c-ide/backward-func.gif"><img src="static/c-ide/backward-func.gif" alt="backward-func.gif" /></a></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><b>C-M-k</b> runs <code>kill-sexp</code>, to kill balanced expression</td>
<td class="left">&#xa0;</td>
<td class="left"><b>C-M-&lt;SPC&gt;</b> or <b>C-M-@</b> runs <code>mark-sexp</code>, to put mark after</td>
</tr>

<tr>
<td class="left">forward that can be a pair or a symbol.</td>
<td class="left">&#xa0;</td>
<td class="left">following expression that can be a pair or a symbol.</td>
</tr>

<tr>
<td class="left"><a href="static/c-ide/kill-func-body.gif"><img src="static/c-ide/kill-func-body.gif" alt="kill-func-body.gif" /></a></td>
<td class="left">&#xa0;</td>
<td class="left"><a href="static/c-ide/mark-func-body.gif"><img src="static/c-ide/mark-func-body.gif" alt="mark-func-body.gif" /></a></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><b>C-M-a</b> runs <code>beginning-of-defun</code>, to move point to beginning of</td>
<td class="left">&#xa0;</td>
<td class="left"><b>C-M-e</b> runs <code>end-of-defun</code>, to move point to end of a</td>
</tr>

<tr>
<td class="left">a function.</td>
<td class="left">&#xa0;</td>
<td class="left">function.</td>
</tr>

<tr>
<td class="left"><a href="static/c-ide/beginning-of-defun.gif"><img src="static/c-ide/beginning-of-defun.gif" alt="beginning-of-defun.gif" /></a></td>
<td class="left">&#xa0;</td>
<td class="left"><a href="static/c-ide/end-of-defun.gif"><img src="static/c-ide/end-of-defun.gif" alt="end-of-defun.gif" /></a></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><b>C-M-h</b> runs <code>mark-defun</code>, to put a region around whole current</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">or following function.</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><a href="static/c-ide/mark-defun.gif"><img src="static/c-ide/mark-defun.gif" alt="mark-defun.gif" /></a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="source-navigation" name="source-navigation"></a><span class="section-number-2">4</span> Source code navigation</h2>
<div class="outline-text-2" id="text-4">
<p>
At this point, we begin using components of our emacs IDE, so if
you're using the demo to perform its install, you'll need to wait for
that to finish, and to close the second instance of emacs that you
were using in the previous section.
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><a id="ID-b1292347-d0ed-4421-9905-33f1050883b2" name="ID-b1292347-d0ed-4421-9905-33f1050883b2"></a><span class="section-number-3">4.1</span> Package preparation</h3>
<div class="outline-text-3" id="text-4-1">
<p>
If you didn't use the the demo to install the emacs IDE components,
you'll now need to install <a href="http://www.gnu.org/software/global">GNU Global</a>, and you'll need to install from
MELPA your choice of either <a href="https://github.com/leoliu/ggtags">ggtags</a> or the pair of packages <a href="https://github.com/emacs-helm/helm">helm</a> +
<a href="https://github.com/syohex/emacs-helm-gtags">helm-gtags</a>. In the demo package, the elisp code used to setup those packages can be found in <code>setup-helm-tags.el</code> / <code>setup-ggtags.el</code>.
</p>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><a id="ID-b4902a85-f303-4f5f-8c13-1eb3d2d2de73" name="ID-b4902a85-f303-4f5f-8c13-1eb3d2d2de73"></a><span class="section-number-3">4.2</span> Basic concepts of tags</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Source code navigation done by IDEs employs a concept called <code>tags</code>, a
term for an entity in source code. An entity can be a variable, a
method definition, an include-operator&#x2026; A tag contains information
such as name of the tag (the name of the variable, class, method),
location of this tag in source code and which file it belongs to. As
an example, GNU Global generates three tag databases:
</p>

<ul class="org-ul">
<li><b>GTAGS</b>: definition database
</li>
<li><b>GRTAGS</b>: reference database
</li>
<li><b>GPATH</b>: path name database
</li>
</ul>

<p>
A definition of a tag is where a tag is implemented. For example, a
function definition is the body where it is actually implemented, or a
variable definition is where the type and its property (i.e static) is
specified.
</p>

<p>
A reference of a tag is where a tag is used in a source tree, but not
where it is defined.
</p>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><a id="tag-database-creation" name="tag-database-creation"></a><span class="section-number-3">4.3</span> Tag database creation</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Were you <span class="underline">not</span> using the emacs (or some other) IDE, the way to
create a GTAGS database would be to run <code>gtags</code> at your project root in
terminal:
</p>
<div class="org-src-container">

<pre class="src src-shell-script">$ cd /path/to/project/root
$ gtags
</pre>
</div>
<p>
With the emacs IDE, configured as recommended with the snippets above,
just type <code>C-c g c</code>, which will run either the <code>helm-gtags-create-tags</code> or <code>ggtags-create-tags</code> emacs command.
</p>

<p>
Just to be certain that the database was created, type <code>M-! ls G*</code> to have emacs run the shelll command <code>ls G*</code> and display the output in a dedicated window. You should see the three files GPATH, GRTAGS, and GTAGS.
</p>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><a id="ID-3a64c7a4-e8a5-42b9-9476-28dff9e5cb96" name="ID-3a64c7a4-e8a5-42b9-9476-28dff9e5cb96"></a><span class="section-number-3">4.4</span> Find definitions in current buffer</h3>
<div class="outline-text-3" id="text-4-4">

<p>
If you use Helm, use <code>moo-jump-local</code> from <a href="https://github.com/abo-abo/function-args">function-args</a> package. (But
helm seems to have imenu integration now). You can use it as an
outline tree like in other IDEs. Here is a demo:
</p>


<div class="figure">
<p><a href="static/c-ide/moo-jump-local.gif"><img src="static/c-ide/moo-jump-local.gif" alt="moo-jump-local.gif" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><a id="ID-0331265b-7c3f-457e-ba1d-ef6c3cd24208" name="ID-0331265b-7c3f-457e-ba1d-ef6c3cd24208"></a><span class="section-number-3">4.5</span> Find definitions in project</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>Using <code>gtags</code>: by default, <code>M-.</code> runs <code>ggtags-find-tag-dwim</code> when
<code>ggtags-mode</code> is enabled. The command <code>ggtags-find-tag-dwim</code> jump to
tag base on context:

<ul class="org-ul">
<li>If the tag at point is a definition, <code>ggtags</code> jumps to a
reference. If there is more than one reference, it displays a list
of references.
</li>

<li>If the tag at point is a reference, <code>ggtags</code> jumps to tag
definition.
</li>

<li>If the tag at point is an include header, it jumps to that header.
</li>
</ul>
</li>
</ul>

<p>
You can jump back to original location where you invoked
<code>ggtags-find-tag-dwim</code> by <code>M-,=, which runs =pop-tag-mark</code> (if you
follow my key bindings).
</p>

<p>
You can also find arbitrary tag definition when invoking <code>M-.</code> on
blank space. A prompt asks you for tag pattern, which is a regexp.
</p>

<p>
If <code>ggtags</code> gives you a list of candidates, you can use <code>M-n</code> to move
to next candidate and <code>M-p</code> to move back previous candidate. Use <code>M-g
s</code> to invoke Isearch on candidate buffer list.
</p>

<div class="center">

<div class="figure">
<p><a href="static/c-ide/ggtags-definitions.png"><img src="static/c-ide/ggtags-definitions.png" alt="ggtags-definitions.png" /></a>
</p>
</div>

<p>
(screenshot taken from <a href="https://github.com/leoliu/ggtags">ggtags</a>)
</p>
</div>

<ul class="org-ul">
<li>Using <code>helm-gtags</code>: If key bindings are properly setup as above,
<code>M-.</code> runs <code>helm-gtags-dwim</code>, which behaves the same as
<code>ggtags-find-tag-dwim</code>. Similarly, you jump back to original
location by using <code>M-,=, which runs =tags-loop-continue</code> (Emacs
default).
</li>
</ul>

<div class="center">

<div class="figure">
<p><a href="static/c-ide/helm-gtags-definitions.png"><img src="static/c-ide/helm-gtags-definitions.png" alt="helm-gtags-definitions.png" /></a>
</p>
</div>

<p>
(screenshot taken from <a href="https://github.com/syohex/emacs-helm-gtags">helm-gtags</a>)
</p>
</div>

<p>
You can also find arbitrary tag definition when invoking <code>M-.</code> on
blank space. A prompt asks you for tag pattern, which is a
regexp.
</p>

<p>
<code>helm-gtags</code> provides a really nice feature that uses Helm to display
all available tags in a project and incrementally filtering, and is really
fast using <code>helm-gtags-select</code>, which is bound to <code>C-j</code> in my setup
above. This is useful when you want to explore tags in unfamiliar
project. Demo:
</p>


<div class="figure">
<p><a href="static/c-ide/helm-gtags-select.gif"><img src="static/c-ide/helm-gtags-select.gif" alt="helm-gtags-select.gif" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><a id="ID-410cfad4-a08d-4139-8c37-cb1bff5bd44e" name="ID-410cfad4-a08d-4139-8c37-cb1bff5bd44e"></a><span class="section-number-3">4.6</span> Find references in project</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>Using <code>ggtags</code>:  Either run <code>ggtags-find-tag-dwim</code> or
<code>ggtags-find-reference</code>, which only finds references.
</li>

<li>Using <code>helm-gtags</code>: Either run <code>helm-gtags-dwim</code> or
<code>helm-gtags-find-rtags</code>, bound to <b>C-c g r</b>, which only finds
references. Note that for <code>helm-gtags-find-rtags</code>:

<ul class="org-ul">
<li>if point is inside a function, the prompt will be default to the
function name.
</li>

<li>If point is on a function, it lists references of that functions
immediately.
</li>

<li>If point is on a variable, <code>helm-gtags-find-rtags</code> won't have any
effect. You should use <code>helm-gtags-find-symbol</code>, which is bound to
<b>C-c g s</b>.
</li>
</ul>
</li>
</ul>

<p>
Find functions that calls function is actually a special case of
finding references. That is, you gather references for a function.
</p>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><a id="ID-793aa930-0586-4dbe-9a10-55407be888f3" name="ID-793aa930-0586-4dbe-9a10-55407be888f3"></a><span class="section-number-3">4.7</span> Find functions that current functions call</h3>
<div class="outline-text-3" id="text-4-7">
<p>
If you want to list all the functions that the current function - the
function that point is inside - calls, you can do that with
<code>helm-gtags-tags-in-this-function</code>, which is bound to <b>C-c g a</b> in my
setup.
</p>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><a id="ID-b6c7d5a9-2fce-4488-a7d5-3eb301b6b89a" name="ID-b6c7d5a9-2fce-4488-a7d5-3eb301b6b89a"></a><span class="section-number-3">4.8</span> Find files in project</h3>
<div class="outline-text-3" id="text-4-8">
<ul class="org-ul">
<li>Using <code>ggtags</code>: Run <code>ggtags-find-file</code> to find a file from all the
files indexed. If point is on an included header file,
<code>ggtags-find-tag-dwim</code> automatically jumps to the file.
</li>

<li>Using <code>helm-gtags</code>: Run <code>helm-gtags-find-files</code> to find files
matching regexp. If point is on an included header file,
<code>helm-gtags-dwim</code> automatically jumps to the file.
</li>
</ul>

<p>
Alternatively, you have a more generic solution, that is using
Projectile. Projectile is a generic project management tool that you
learn later. With Projectile, jumping around version controlled
project like Linux kernel is a breeze, since you can jump to any file
regardless of where you are standing in the project.
</p>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><a id="ID-db6bf87e-969d-42b8-ae60-b0b58f13e073" name="ID-db6bf87e-969d-42b8-ae60-b0b58f13e073"></a><span class="section-number-3">4.9</span> View visited tags with tag stack</h3>
<div class="outline-text-3" id="text-4-9">
<ul class="org-ul">
<li>Using <code>ggtags</code>: As you know that you can jump back with
<code>pop-tag-mark</code> (bound to <code>M-,=), you can also view a list of visited
  tags using =ggtags-view-tag-history</code>, which is bound to <code>C-c g
  h</code>. It displays visited tags from newest to oldest, that is from top
to bottom.
</li>

<li>Using <code>helm-gtags</code>: Similarly, <code>helm-gtags</code> also has the command
<code>helm-gtags-show-stack</code> that shows visited tags from newest to
oldest, from top to bottom.
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="speedbar" name="speedbar"></a><span class="section-number-2">5</span> Browse source tree with <code>Speedbar</code> file browser</h2>
<div class="outline-text-2" id="text-5">
<p>
If you want a static outline tree, Emacs also has a more one:
<code>Speedbar</code>. To use Speed bar, <code>M-x speedbar</code> and a frame that contains
a directory tree appear. In this directory, to the left of a file or
directory name is an icon with <code>+</code> sign in it. You can click the icon
to open the content of a node. If the node is a file, the children of
the files are tags (variable and function definitions) of the file; if
the node is a directory, the children of the node are files in that
directory. One important thing to remember, Speedbar only lists files
that match <code>speedbar-file-regexp</code>, that contains the extensions for
common programming languages. If you don't see files in your
programming languages listed, consider adding it the regexp list.
</p>

<p>
<b>Basic usage</b>:
</p>

<ul class="org-ul">
<li>Use <b>SPC</b> to open the children of a node.
</li>

<li><b>RET</b> to open the node in another window. If node is a file, open
that file; if node is a directory, enter that directory; if node is
a tag in a file, jump to the location of that tag in the file.
</li>

<li><b>U</b> to go up parent directory.
</li>

<li><b>n</b> or <b>p</b> moves to next or previous node.
</li>

<li><b>M-n</b> or <b>M-p</b> moves to next or previous node at the current level.
</li>

<li><b>b</b> switches to buffer list using Speedbar presentation. You can
also open children of each buffer.
</li>

<li><b>f</b> switches back to file list.
</li>
</ul>

<p>
To enable <code>speedbar</code> to show all files:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq speedbar-show-unknown-files t)
</pre>
</div>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><a id="ID-1824d791-2592-4efa-90b7-845e6a68681d" name="ID-1824d791-2592-4efa-90b7-845e6a68681d"></a><span class="section-number-3">5.1</span> Package: <code>sr-speedbar</code></h3>
<div class="outline-text-3" id="text-5-1">

<p>
However, you may feel that a frame is difficult to use. To solve this
issue, you need <code>sr-speedbar</code>, which can be installed via
MELPA.
</p>

<ul class="org-ul">
<li>To open <code>sr-speedbar</code>, execute the command <code>sr-speedbar-open</code> or
<code>sr-speedbar-toggle</code>.
</li>

<li>To close <code>sr-speedbar</code>, execute the command <code>sr-speedbar-close</code> or
<code>sr-speedbar-toggle</code> again.
</li>
</ul>

<p>
Best is to use <code>sr-speedbar-toggle</code> only, for simplicity.
</p>

<p>
<code>sr-speedbar</code> gives the following improvements:
</p>

<ul class="org-ul">
<li>Automatically switches directory tree - when you switch buffer - to
the <code>default-directory</code> of current buffer.
</li>
<li>Use an Emacs window instead of frame, make it easier to use.
</li>
<li><b>C-x 1</b> deletes every window except Speedbar, so you won't have to
open again.
</li>
<li>You can prevent <b>C-x o</b> to jump to <code>sr-speedbar</code> window by setting
<code>sr-speedbar-skip-other-window-p</code> to `t`. You can still move to
<code>sr-speedbar</code> window using either the mouse or <a href="http://www.emacswiki.org/emacs-en/WindMove">windmove</a>.
</li>
</ul>

<p>
<span class="underline">Demo</span>: In the demo, you can see that the function <code>set-cpu-active</code> is
being highlighted. That's what happens when you press <b>RET</b> on a tag:
Speedbar moves to the location of that tag and highlight it. Looking
at the Speedbar, under <code>set-cpu-active</code> node, it contains these
children:
</p>

<ul class="org-ul">
<li>The first child is always the return type, <code>void</code>.
</li>
<li>The subsequent children are function parameters. Inside each
function parameter node is its type.
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/sr-speedbar.gif"><img src="static/c-ide/sr-speedbar.gif" alt="sr-speedbar.gif" /></a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><a id="company" name="company"></a><span class="section-number-2">6</span> General completion with <code>company-mode</code></h2>
<div class="outline-text-2" id="text-6">
<p>
<code>company-mode</code> is a text completion framework for Emacs. The name
stands for "complete anything". It uses pluggable back-ends and
front-ends to retrieve and display completion candidates.
</p>

<p>
It comes with several back-ends such as Elisp, Clang, Semantic, Eclim,
Ropemacs, Ispell, CMake, BBDB, Yasnippet, dabbrev, etags, gtags,
files, keywords and a few others.
</p>

<p>
After installing <code>company-mode</code> from MELPA, activate it globally:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">company</span>)
(add-hook 'after-init-hook 'global-company-mode)
</pre>
</div>

<p>
<b>General Usage</b>: Completion will start automatically after you type a
few letters. Use <b>M-n</b> and <b>M-p</b> to select, <b>&lt;return&gt;</b> to complete or
<b>&lt;tab&gt;</b> to complete the common part. Search through the completions
with <b>C-s</b>, <b>C-r</b> and <b>C-o</b>. Press <b>M-(digit)</b> to quickly complete
with one of the first 10 candidates. When the completion candidates
are shown, press <b>&lt;f1&gt;</b> to display the documentation for the selected
candidate, or <b>C-w</b> to see its source. Not all back-ends support
this.
</p>

<p>
The variable <code>company-backends</code> specifies a list of backends that
<code>company-mode</code> uses to retrieves completion candidates for you.
</p>

<p>
That's the basic. In the later sections, you will configure
<code>company-mode</code> to provide completion candidates.
</p>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><a id="demo-project" name="demo-project"></a><span class="section-number-2">7</span> Demo project</h2>
<div class="outline-text-2" id="text-7">
<p>
I uploaded a demo project for you to play with completion feature
<a href="https://github.com/tuhdo/c-demo-project">here</a>. The project has this structure:
</p>

<div class="org-src-container">

<pre class="src src-fundamental">project_root/
            Makefile
            src/
                main.c
                lib.c
                lib2.c
                feature1/
                    feature1.c
            include1/
                lib.h
                feature1/
                    feature1.h
            include2/
                lib2.h
</pre>
</div>

<p>
For the <code>.h</code> files, all have this content:
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #8cc4ff;">void</span> <span style="color: #00cdcd;">filename_func1</span>();
<span style="color: #8cc4ff;">int</span> <span style="color: #00cdcd;">filename_func2</span>(<span style="color: #8cc4ff;">int</span> <span style="color: #00cdcd;">a</span>, <span style="color: #8cc4ff;">int</span> <span style="color: #00cdcd;">b</span>);
</pre>
</div>

<p>
For <code>.c</code> files, except for <code>main.c</code>, all have this template:
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #cd00cd;">#include</span> <span style="color: #cdcd00;">"filename.h"</span>

<span style="color: #8cc4ff;">void</span> <span style="color: #00cdcd;">filename_func1</span>() { }

<span style="color: #8cc4ff;">int</span> <span style="color: #00cdcd;">filename_func2</span>(<span style="color: #8cc4ff;">int</span> <span style="color: #00cdcd;">a</span>, <span style="color: #8cc4ff;">int</span> <span style="color: #00cdcd;">b</span>) { }
</pre>
</div>

<p>
<code>filename</code> or <code>FILENAME</code> is actual filename like <code>lib1</code>, <code>lib2</code>&#x2026;
</p>

<p>
The files look silly but good enough for our learning purpose.
</p>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><a id="company-clang" name="company-clang"></a><span class="section-number-2">8</span> Source code completion using Clang</h2>
<div class="outline-text-2" id="text-8">
<p>
To use <code>company-mode</code> with Clang, add this configuration:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq company-backends (delete 'company-semantic company-backends))
(define-key c-mode-map  [(tab)] 'company-complete)
(define-key c++-mode-map  [(tab)] 'company-complete)
</pre>
</div>

<p>
You have two commands for completing C/C++ code:
</p>

<ul class="org-ul">
<li><code>company-clang</code>: use <code>clang</code> to retrieve completion candidates. You
will have completion with system header files, but not your
project. By default, <code>company-complete</code> already includes
<code>company-clang</code> backend, so you can use <code>company-complete</code> to
complete for many thing. Note that in the configuration for
<code>company-mode</code> above, we have to delete <code>company-semantic</code>,
otherwise <code>company-complete</code> will use <code>company-semantic</code> instead of
<code>company-clang</code>, because it has higher precedence in
<code>company-backends</code>. <code>company-semantic</code> will be discuss in the CEDET
section.

<p>
To retrieve completion candidates for your projects, you will have
to tell Clang where your include paths are. Create a file named
<code>.dir-locals.el</code> at your project root:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">((nil . ((company-clang-arguments . (<span style="color: #cdcd00;">"-I/home/&lt;user&gt;/project_root/include1/"</span>
                                     <span style="color: #cdcd00;">"-I/home/&lt;user&gt;/project_root/include2/"</span>)))))
</pre>
</div>
</li>
</ul>

<p>
If you put a file with a special name .dir-locals.el in a directory,
Emacs will read it when it visits any file in that directory or any of
its subdirectories, and apply the settings it specifies to the file’s
buffer. If you want to know more, read <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html">GNU Emacs Manual -
Per-Directory Local Variables</a>. If you use Helm, you can easily insert
absolute path by <b>C-c i</b> at the current path in <code>helm-find-files</code>
(bound to <b>C-x C-f</b> by default in my demo <code>.emacs.d</code> at the beginning):
</p>


<div class="figure">
<p><a href="static/c-ide/helm-files-insertion.gif"><img src="static/c-ide/helm-files-insertion.gif" alt="helm-files-insertion.gif" /></a>
</p>
</div>

<p>
In the above example, <code>nil</code> means apply the settings to any file or
sub-directory visited. If <code>non-nil</code>, you have to specify a major mode
and the settings are applied to major modes only. You set
<code>company-clang</code> to <code>c-mode</code> and <code>c++-mode</code> anyway, so there's no
problem setting major mode to nil. The remaining is a key-value pair
of variable and value of that variable. <code>company-clang-arguments</code> is
where you can tell include paths, and it takes a list of strings of
include paths, as you can see above. After that, <code>company-clang</code> can
see include paths in your project. If you add something new, like an
include path, to your <code>.dir-locals.el</code> and is editing some source
file, reopen the file for the new values to take effect.
</p>

<ul class="org-ul">
<li><code>company-gtags</code>: use GTAGS database from <code>GNU Global</code> to retrieve
completion candidates. It displays ALL completion candidates in
GTAGS database regarding of scope. Use <code>company-gtags</code> to provide
code completion in your current project.
</li>
</ul>

<p>
<b><span class="underline">Exercise</span></b>:
</p>

<ul class="org-ul">
<li>Create a <code>.dir-locals.el</code> at <code>project_root</code>.
</li>
<li>Add this Emacs Lisp code:

<div class="org-src-container">

<pre class="src src-emacs-lisp">((nil . ((company-clang-arguments . (<span style="color: #cdcd00;">"-I/home/&lt;user&gt;/project_root/include1/"</span>
                                     <span style="color: #cdcd00;">"-I/home/&lt;user&gt;/project_root/include2/"</span>)))))
</pre>
</div>
</li>
</ul>

<p>
Replace <code>&lt;user&gt;</code> with your username.
</p>

<ul class="org-ul">
<li>Enter any source file and start completion. You will see that
<code>company-clang</code> correctly retrieves completion candidates in those directories.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><a id="ID-6e05e8a5-04a3-4279-bf99-22fd627c0e92" name="ID-6e05e8a5-04a3-4279-bf99-22fd627c0e92"></a><span class="section-number-2">9</span> Header file completion with <code>company-c-headers</code> package</h2>
<div class="outline-text-2" id="text-9">
<p>
<a href="https://github.com/randomphrase/company-c-headers">company-c-headers</a> provides auto-completion for C/C++ headers using
Company. After installing from MELPA, set it up:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'company-backends 'company-c-headers)
</pre>
</div>


<div class="figure">
<p><a href="static/c-ide/company-c-header.png"><img src="static/c-ide/company-c-header.png" alt="company-c-header.png" /></a>
</p>
</div>

<p>
<b><span class="underline">IMPORTANT</span></b>: If you want to complete C++ header files, you have to
add its paths since by default <code>company-c-headers</code> only includes these
two system include paths: <code>/usr/include/</code> and
<code>/usr/local/include/</code>. To enable C++ header completion for standard
libraries, you have to add its path, for example, like this:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'company-c-headers-path-system <span style="color: #cdcd00;">"/usr/include/c++/4.8/"</span>)
</pre>
</div>

<p>
After that, you can complete C++ header files. To complete project
local, use <code>company-c-headers-path-user</code> and put it in
<code>.dir-locals.el</code>.
</p>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><a id="cedet" name="cedet"></a><span class="section-number-2">10</span> CEDET</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><a id="what-is-cedet" name="what-is-cedet"></a><span class="section-number-3">10.1</span> What is CEDET?</h3>
<div class="outline-text-3" id="text-10-1">
<p>
CEDET is a (C)ollection of (E)macs (D)evelopment (E)nvironment (T)ools
written with the end goal of creating an advanced development
environment in Emacs. CEDET includes common features such as
intelligent completion, source code navigation, project management,
code generation with templates . CEDET also provides a framework for
working with programming languages; support for new programming
languages can be added and use CEDET to provide IDE-like features.
</p>

<p>
CEDET can give you code completion, but this process takes time and
can block your Emacs while it is doing so. If you have large project,
you may not want to use CEDET for code completion. But, you can use
CEDET perfectly for utilities that work at file scope i.e. refactoring
local variables in a function in a file.
</p>
</div>
</div>

<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><a id="why-use-cedet" name="why-use-cedet"></a><span class="section-number-3">10.2</span> Why use CEDET?</h3>
<div class="outline-text-3" id="text-10-2">
<p>
CEDET is simple to setup and portable (right winthin Emacs and written
entirely with Emacs Lisp). Without CEDET, you have to use external
tools and third party Emacs packages. The downside of external tools
is that they are not specifically designed for Emacs. They have
similar use cases, but not always satisfying. For example, source code
indexing tools such as GNU Global and Exuberant Ctags are really good
at working static source code, but they do not keep track changes in
real time; CEDET does:
</p>


<div class="figure">
<p><a href="static/auto_complete.gif"><img src="static/auto_complete.gif" alt="auto_complete.gif" /></a>
</p>
</div>

<p>
As you can see, CEDET recognizes when <code>printk.h</code> is included and
provides appropriate completion candidates. In contrast, non-context
sentisve completion is like this:
</p>


<div class="figure">
<p><a href="static/c-ide/company-clang-company-gtags.gif"><img src="static/c-ide/company-clang-company-gtags.gif" alt="company-clang-company-gtags.gif" /></a>
</p>
</div>

<p>
In this case, the completion system gets all candidates straight from
GNU Global generated database without considering current context.
</p>

<p>
The disadvantage is that CEDET is written in Emacs Lisp, and it is
bound to the performance limitations of Emacs. Even though, CEDET is
still really fast for moderate-size source files. CEDET also makes use
of external tools like GNU Global or Cscope or Exuberant Ctags for
finding symbol references/definition in a project to reduce its
workload.
</p>
</div>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3"><a id="install-cedet" name="install-cedet"></a><span class="section-number-3">10.3</span> Installation</h3>
<div class="outline-text-3" id="text-10-3">
<p>
CEDET was merged into Emacs since 23.2. You do not need to install
CEDET manually. However, you can also use the development repository
that contains latest bug fixes and more features. Nevertheless, the
built-in Emacs is still adequate for daily usage and convenient for
trying out before actually cloning and use the development version.
Skip this section if you only want to try Emacs. Come back later if
you really like it.
</p>

<p>
If you really want to use the development version with latest feature,
checkout this branch:
</p>

<div class="org-src-container">

<pre class="src src-sh">git clone http://git.code.sf.net/p/cedet/git cedet
</pre>
</div>

<p>
Be sure to place the checked out <code>cedet</code> directory in your
<code>~/.emacs.d</code>. Then compile it:
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #cd00cd;">cd</span> cedet
make <span style="color: #cdcd00;"># </span><span style="color: #cdcd00;">wait for it to complete</span>
<span style="color: #cd00cd;">cd</span> contrib
make
</pre>
</div>

<p>
Finally, assume that you placed your newly cloned CEDET in
<code>~/.emacs.d</code>, load it into your Emacs:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(load-file (concat user-emacs-directory <span style="color: #cdcd00;">"/cedet/cedet-devel-load.el"</span>))
(load-file (concat user-emacs-directory <span style="color: #cdcd00;">"cedet/contrib/cedet-contrib-load.el"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4"><a id="semantic-minor-modes" name="semantic-minor-modes"></a><span class="section-number-3">10.4</span> Semantic minor modes</h3>
<div class="outline-text-3" id="text-10-4">
<p>
<code>Semantic</code> is a package that provides language-aware editing commands
based on source code parsers. Parsing is a process of analyzing source
code based on programming language syntax. Emacs understands your
source code through this process to provides features such as
contextual code completion, code navigation. Here is an example how
Semantic helps you provides completion for Boost:
</p>


<div class="figure">
<p><a href="static/c-ide/semantic-boost-demo.gif"><img src="static/c-ide/semantic-boost-demo.gif" alt="semantic-boost-demo.gif" /></a>
</p>
</div>
</div>

<ol class="org-ol"><li><a id="sec-10-4-0-1" name="sec-10-4-0-1"></a><a id="setup-semantic" name="setup-semantic"></a><b>Setup Semantic</b><br  /><div class="outline-text-5" id="text-10-4-0-1">
<p>
To enable code completion using Semantic, add the following code:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">cc-mode</span>)
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">semantic</span>)

(global-semanticdb-minor-mode 1)
(global-semantic-idle-scheduler-mode 1)

(semantic-mode 1)
</pre>
</div>
</div>
</li>

<li><a id="sec-10-4-0-2" name="sec-10-4-0-2"></a><a id="semantic-mode" name="semantic-mode"></a><b>Command</b>: <code>semantic-mode</code><br  /><div class="outline-text-5" id="text-10-4-0-2">
<p>
This command activates <code>semantic-mode</code>. In Semantic mode, Emacs parses
the buffers you visit for their semantic content. The parsing looks
like this:
</p>


<div class="figure">
<p><a href="static/c-ide/semantic-parsing.gif"><img src="static/c-ide/semantic-parsing.gif" alt="semantic-parsing.gif" /></a>
</p>
</div>

<p>
Notice that at the bottom, Emacs prints messages like this: <code>Parsing
&lt;file&gt; (LL)...&lt;progress in percentage&gt;</code>. This is common behavior of
<code>Semantic</code>: when you perform a jump to a symbol or perform a
completion, <code>Semantic</code> tries to be accurate by parsing all the
included files and all the included files in the included files and so
on, until it reaches the end:
</p>

<p>
You may worry that this process takes a long time. Sometimes, it
does. However, this is just a one time process. Once it is parsed,
Semantic will cache the parsing result for future use. The next time
you perform some action on the parsed code, such as code completion,
you will get your desired output instantly.
</p>
</div>
</li>

<li><a id="sec-10-4-0-3" name="sec-10-4-0-3"></a><a id="global-semantic-minor-mode" name="global-semantic-minor-mode"></a><b>Command</b>: <code>global-semanticdb-minor-mode</code><br  /><div class="outline-text-5" id="text-10-4-0-3">
<p>
As mentioned above, Semantic caches parsing result for future
use. To do that, <code>semanticdb-minor-mode</code> must be activated. In
Semantic DB mode, Semantic parsers store results in a database, which
can be saved for future Emacs sessions. The cache is saved in
directory specified by <code>semanticdb-default-save-directory</code>
variable. The default directory is <code>~/.emacs.d/semanticdb</code>.
</p>
</div>
</li>

<li><a id="sec-10-4-0-4" name="sec-10-4-0-4"></a><a id="semantic-idle-scheduler-mode" name="semantic-idle-scheduler-mode"></a><b>Command</b>: <code>global-semantic-idle-scheduler-mode</code><br  /><div class="outline-text-5" id="text-10-4-0-4">
<p>
When <code>semantic-idle-scheduler-mode</code> is enabled, Emacs periodically
checks to see if the buffer is out of date, and reparses while the
user is idle (not typing). When this mode is off, a buffer is only
reparsed when user explicitly issue some command.
</p>

<p>
With <code>semantic-idle-scheduler-mode</code>, Emacs keeps track live changes of
your source code.
</p>
</div>
</li>
<li><a id="sec-10-4-0-5" name="sec-10-4-0-5"></a><a id="semantic-add-system-includes" name="semantic-add-system-includes"></a><b>Add more system include paths</b><br  /><div class="outline-text-5" id="text-10-4-0-5">
<p>
By default, Semantic automatically includes some default system
include paths such as <code>/usr/include</code>, <code>/usr/local/include</code>&#x2026; You can
view the list of include paths in
<code>semantic-dependency-system-include-path</code>. To add more include paths,
for example Boost include paths, use the function
<code>semantic-add-system-include</code> like this:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(semantic-add-system-include <span style="color: #cdcd00;">"/usr/include/boost"</span> 'c++-mode)
(semantic-add-system-include <span style="color: #cdcd00;">"~/linux/kernel"</span>)
(semantic-add-system-include <span style="color: #cdcd00;">"~/linux/include"</span>)
</pre>
</div>

<p>
If you want the system include paths to be available on both C/C++
modes, then ignore the optional mode argument in
<code>semantic-add-system-include</code>.
</p>
</div>
</li>
<li><a id="sec-10-4-0-6" name="sec-10-4-0-6"></a><a id="company-semantic" name="company-semantic"></a>Completion using <code>company-mode</code><br  /><div class="outline-text-5" id="text-10-4-0-6">
<p>
<code>company-mode</code> provides a command called <code>company-semantic</code> that uses
SemanticDB to retrieve completion candidates. Function interface of
each candidate is shown in the minibuffer. One nice thing of
<code>company-semantic</code> is that it fixed an issue of original Semantic
completion <code>semantic-ia-complete-symbol</code>: it can show you completions
even if there's no prefix. The original <code>semantic-ia-complete-symbol</code>
requires to have at least one character as a prefix for finding
completions.
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5"><a id="cedet-can-do-more" name="cedet-can-do-more"></a><span class="section-number-3">10.5</span> CEDET can do more</h3>
<div class="outline-text-3" id="text-10-5">
<p>
This guide only covers a portion of CEDET. Since Semantic parses
source code and creates a database for code  completion, it would be
useful to reuse the database for other features such as code
navigation, jump to definition and gather references. These are cool
features. For example, CEDET provide nice syntax highlighting for
gathering references:
</p>


<div class="figure">
<p><a href="static/c-ide/semantic-symref.gif"><img src="static/c-ide/semantic-symref.gif" alt="semantic-symref.gif" /></a>
</p>
</div>

<p>
The above feature is called Semantic Symref. It queries tag references
from SemanticDB and display the result in another buffer. Please
refer to <a href="https://www.gnu.org/software/emacs/manual/html_node/semantic/SymRef.html">GNU Manual - Symbol References</a> for more info. If your project
is only the size of Emacs or similar, then Semantic Symref is a viable
choice. Remember that when entering new files, Semantic takes time to
parse and if you gather references for the first time, you will have
to wait for a while for Semantic doing its job. After the first time,
subsequent uses of Semantic Symref happens instantly.
</p>

<p>
But, for navigating around the source tree, we already have <code>ggtags</code>
and <code>helm-gtags</code>, which uses GNU Global for much faster indexing for
large project like Linux kernel. The only thing that other tools
cannot do, is context-sensitive completion. That's why we only use
CEDET for code completion in this guide. Nevertheless, Semantic Symref
is still a viable choice for small to medium sized projects. Choose
the one you prefer.
</p>

<p>
Other solutions that use <code>clang</code> is quite good but not there yet. For
example, <a href="https://github.com/brianjcj/auto-complete-clang">auto-complete-clang</a> is fine for getting system header
candidates (since <code>clang</code> has system paths by default), but it has no
concept of project and is not aware of project include path. You can
add more arbitrary include paths to <a href="https://github.com/brianjcj/auto-complete-clang">auto-complete-clang</a>, but it won't
be pretty: once you add an include path for a project, it is visible
to all other projects since the include path is treat as system
include path. That means, whenever you try to complete something, you
get irrelevant candidates from other projects as well. Quite
annoying. <code>company-clang</code> also has the same problem. Another solution
is <a href="https://github.com/Andersbakken/rtags">rtags</a>, but it is really complicated to setup, especially if you use
<code>make</code>; I never succeed with it. <code>clang</code> based packages still have a
long way to go. CEDET also supports <code>clang</code> for retrieving completion
candidates. It also has the limitations of other packages.
</p>

<p>
CEDET is best used with new project, because Semantic parse code as
you write. As a result, you won't have to wait for parsing unknown
source files to get completion candidates.
</p>
</div>
</div>

<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6"><a id="source-code-navigation-using-senator" name="source-code-navigation-using-senator"></a><span class="section-number-3">10.6</span> Source code navigation using Senator</h3>
<div class="outline-text-3" id="text-10-6">
<p>
Senator is a part of CEDET. Senator stands for SEmantic
NAvigaTOR. Senator provides some useful commands for operating on
semantic tags in SemanticDB. As you can see, another utility makes
use of SemanticDB, aside from smart completion. It is like the heart
of CEDET: once Semantic fails to parse, tools centered around it fail
as well. If such situation happens, you always have a reserved and
simpler solution: use GNU Global with <code>ggtags</code> or <code>helm-gtags</code>
frontends. The following commands are provided by Senator:
</p>
</div>

<div id="outline-container-sec-10-6-1" class="outline-4">
<h4 id="sec-10-6-1"><a id="senator-navigation" name="senator-navigation"></a><span class="section-number-4">10.6.1</span> Navigation</h4>
<div class="outline-text-4" id="text-10-6-1">

<p>
Senator provides commands for navigating by tag.
</p>

<ul class="org-ul">
<li><b>C-c , n</b> runs <code>senator-next-tag</code>, navigate to the next Semantic
tag.
</li>

<li><b>C-c , p</b> runs <code>senator-previous-tag</code>, navigate to the previous
Semantic tag.

<p>
Here is how both of those commands work:
</p>


<div class="figure">
<p><a href="static/c-ide/senator-next-previous-tag.gif"><img src="static/c-ide/senator-next-previous-tag.gif" alt="senator-next-previous-tag.gif" /></a>
</p>
</div>

<p>
As you see,the C macro (in the screenshot, its <code>DECLARE_COMPLETION</code>)
is not considered a tag.
</p>
</li>

<li><code>senator-jump</code> (only available in CEDET bzr), specify a tag to jump
to. <b>TAB</b> for a list of available Semantic tags in current buffer,
similar to <b>TAB</b> in <b>M-x</b> in stock Emacs. If you use Helm, use
<code>moo-jump-local</code> from the package <code>function-args</code> instead.

<p>
Demo (<code>helm-mode</code> is disabled):
</p>


<div class="figure">
<p><a href="static/c-ide/senator-jump.gif"><img src="static/c-ide/senator-jump.gif" alt="senator-jump.gif" /></a>
</p>
</div>
</li>

<li><b>C-c , u</b> runs <code>senator-go-to-up-reference</code>, move up one reference
level from current tag. An upper reference level of a tag is the
source that defines the tag or includes the tag. This is incredibly
useful when you want to jump from a function declaration in a class
to its definition, or jump to the class that a function belongs to,
quickly.


<div class="figure">
<p><a href="static/c-ide/senator-go-to-up-reference.gif"><img src="static/c-ide/senator-go-to-up-reference.gif" alt="senator-go-to-up-reference.gif" /></a>
</p>
</div>

<p>
In the demo, I only use <code>senator-go-to-up-reference</code> to switch from
a declaration, that is <code>PIC32F42(string Name, short MemorySize);</code> in
<code>PIC32F42.h</code> to its implementation in <code>PIC32F42.c</code>. <b>C-c , u</b> again,
point jump is on the class <code>PIC32F42</code>, which is the class that the
function belongs. Class <code>PIC32F42</code> has its parent class
<code>Microcontrller</code>, and I run <b>C-c , u</b> again to move point to
<code>Microcontrller</code> class. At this point, I cannot move further.
</p>
</li>
</ul>

<p>
Semantic also provides a useful command for finding all references of
a tag, that is <code>semantic-symref</code>, as demonstrated in previous
section. On a symbol, <b>C-c , g</b> and a prompt appear asking for a tag
for gathering references, with the default is the symbol at
point. Leave prompt blank and <b>RET</b> to use the default or enter
another symbol if you change your mind.
</p>
</div>
</div>
<div id="outline-container-sec-10-6-2" class="outline-4">
<h4 id="sec-10-6-2"><a id="senator-copy-paste" name="senator-copy-paste"></a><span class="section-number-4">10.6.2</span> Copy/Paste</h4>
<div class="outline-text-4" id="text-10-6-2">

<ul class="org-ul">
<li><code>C-c , M-w</code> runs <code>senator-copy-tag</code>, take the current tag, and place
it in the tag ring.
</li>

<li><code>C-c , C-w</code> runs <code>senator-kill-tag</code>, take the current tag, place it
in the tag ring, and kill it. Killing the tag removes the text for
that tag, and places it into the kill ring. Retrieve that text with
<b>C-y</b>.

<p>
The above commands are basically like normal <code>M-w</code> and <code>C-w</code>, but are
used for tags. For example, run <code>C-c , C-w</code> with point inside a
function definition kills the whole function body and its
interface, or you can kill function parameters, and can be yanked
back with <b>C-y</b>:
</p>


<div class="figure">
<p><a href="static/c-ide/senator-kill-yank-tag.gif"><img src="static/c-ide/senator-kill-yank-tag.gif" alt="senator-kill-yank-tag.gif" /></a>
</p>
</div>

<p>
As you see, the function body and its interface is killed and yanked
back with <b>C-y</b>. You can also see that the function parameter, aside
from its name, its type is also removed when the command is executed.
</p>
</li>

<li><code>C-c , C-y</code> runs <code>senator-yank-tag</code>, yank a tag from the tag
ring. The form the tag takes is different depending on where it is
being yanked to. For example, in previous example with <code>C-c , C-w</code>,
when you run <b>C-y</b>, it yanks the whole thing including function
interface and its body. <b>C-c , C-y</b> only yanks the function
interface.


<div class="figure">
<p><a href="static/c-ide/senator-yank-tag.gif"><img src="static/c-ide/senator-yank-tag.gif" alt="senator-yank-tag.gif" /></a>
</p>
</div>
</li>

<li><code>C-c , r</code> runs <code>senator-copy-tag-to-register</code>, copy the current tag
into a register. With prefix argument will delete the text of the
tag to the kill ring.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-6-3" class="outline-4">
<h4 id="sec-10-6-3"><a id="senator-obsolete-commands" name="senator-obsolete-commands"></a><span class="section-number-4">10.6.3</span> Obsolete commands</h4>
<div class="outline-text-4" id="text-10-6-3">
<p>
Senator also provides commands for code completion:
<code>senator-complete-symbol</code> and <code>senator-completion-menu-popup</code>. Code
completion provided by Senator is simpler than the actual completion
provided by <code>semantic-ia-complete-symbol</code> command that is used by
<code>moo-complete</code> for a list of candidates with full information, such as
complete function interface is displayed correctly. These two
completion commands are provided.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-10-7" class="outline-3">
<h3 id="sec-10-7"><a id="project-management-with-ede" name="project-management-with-ede"></a><span class="section-number-3">10.7</span> <b>(Optional)</b> Project management with EDE</h3>
<div class="outline-text-3" id="text-10-7">
<p>
EDE, short for Emacs Development Environment, is a generic interface
for managing projects. In EDE, a project hierarchy matches a directory
hierarchy. The project's topmost directory is called the project root,
and its subdirectories are sub-projects.
</p>

<p>
EDE can do many things but we will just use it for code completion at
project level. To demonstrate the use of EDE, we will create a little
project of our own.
</p>

<p>
To setup EDE:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">ede</span>)
(global-ede-mode)
</pre>
</div>

<p>
Now, let's try completion in <code>main.c</code> using <code>moo-complete</code> or
<code>company-semantic</code>. Nothing also happens. It is because Semantic only
looks for header files in current directory by default. If you put it
elsewhere, you have to tell Semantic where it is. This is not limited
to only Semantic; you have to specify project include path in Eclipse
as well.
</p>

<ul class="org-ul">
<li>Create a new file called <code>cedet-projects.el</code> in <code>~/.emacs.d/</code>.
</li>
<li>In this file, add a new <code>ede-cpp-root-project</code> in this form:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(ede-cpp-root-project <span style="color: #cdcd00;">"project_root"</span>
                      <span style="color: #cd00cd;">:file</span> <span style="color: #cdcd00;">"/dir/to/project_root/Makefile"</span>)
</pre>
</div>

<p>
The first argument to <code>ede-cpp-root-project</code> is project name. <code>:file</code>
argument specifies path to project root. You must create a file in the
project root, since EDE uses that file as an "anchor" to project
root; in our case, <code>Makefile</code> is the anchor file. Not sure why EDE
just straightly uses root directory.
</p>

<ul class="org-ul">
<li>Add include directories specific to the project and in your system:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(ede-cpp-root-project <span style="color: #cdcd00;">"project_root"</span>
                      <span style="color: #cd00cd;">:file</span> <span style="color: #cdcd00;">"/dir/to/project_root/Makefile"</span>
                      <span style="color: #cd00cd;">:include-path</span> '(<span style="color: #cdcd00;">"/include1"</span>
                                      <span style="color: #cdcd00;">"/include2"</span>) <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">add more include</span>
                      <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">paths here</span>
                      <span style="color: #cd00cd;">:system-include-path</span> '(<span style="color: #cdcd00;">"~/linux"</span>))
</pre>
</div>

<p>
<code>:include-path</code> specifies directories local to your projects that EDE
should search first when looking for a header file. <code>:incluide-path</code>
is relative to project root specified in <code>:file</code>.
</p>

<p>
<code>:system-include-path</code> specifies system include paths that do not
belong to current project. Note that despite it is called
<code>system-include-path</code>, it does not have to be in place like
<code>/usr/include</code>. You can specify any include directories outside of
your current project as "system headers".
</p>

<p>
After done setting up your project, save the file and execute that
<code>ede-cpp-root-project</code> expression with <b>C-x C-e</b>. Now, Semantic is
aware of your project include paths. However, you have to do one last
thing: either close the file <code>main.c</code> and reopen it or <code>M-x
semantic-force-refresh</code> to tell Semantic to analyze <code>main.c</code>
again. Otherwise, Semantic will still keep the previous parsing result
of this file and completion candidates won't be available. As a
result, it is important to load EDE projects defined by
<code>ede-cpp-root-project</code> before opening any project file.
</p>

<p>
After that, try auto-completion and you will see everything is working
fine again:
</p>


<div class="figure">
<p><a href="static/c-ide/ede-project.gif"><img src="static/c-ide/ede-project.gif" alt="ede-project.gif" /></a>
</p>
</div>

<p>
Summary:
</p>

<ul class="org-ul">
<li>EDE, short for Emacs Development Environment, is a generic interface
for managing projects.
</li>
<li>EDE enables Semantic to find sources and perform project level
completions.
</li>
<li>To add a C/C++ project, simply create a project definition with this
template in a file, such as <code>ede-projects.el</code>:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(ede-cpp-root-project <span style="color: #cdcd00;">"project_root"</span>
                      <span style="color: #cd00cd;">:file</span> <span style="color: #cdcd00;">"/dir/to/project_root/Makefile"</span>
                      <span style="color: #cd00cd;">:include-path</span> '(<span style="color: #cdcd00;">"/include1"</span>
                                      <span style="color: #cdcd00;">"/include2"</span>) <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">add more include</span>
                      <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">paths here</span>
                      <span style="color: #cd00cd;">:system-include-path</span> '(<span style="color: #cdcd00;">"~/linux"</span>))
</pre>
</div>

<ul class="org-ul">
<li>Load <code>ede-projects.el</code> when Emacs start.
</li>
<li>If you have opening files, either close or refresh it with <code>M-x
  semantic-force-refresh</code> to make Semantic aware of new changes.
</li>
</ul>

<p>
Later, you will also learn another project management tool called
<code>Projectile</code>. You may ask, why another project management tool? The
differences are:
</p>

<ul class="org-ul">
<li>EDE is older, Projectile appears recently.
</li>
<li>EDE manages project files to integrate with specific build system
and generate corresponding build file (such as Makefile; these
features are not covered in this guide). Projectile provides generic
file management operations such as quickly jump to file/directory in
project, list buffers that belong to current project&#x2026;
</li>
<li>EDE is part of CEDET suite; it is geared toward Semantic. For
example, we used EDE to tell Semantic where to retrieve correct
include paths for current project to perform smart completion in
previous section. Projectile provides a generic interface for
managing your project under a VCS or some supported build system.
</li>
<li>Projectile is easier to learn than EDE.
</li>
</ul>

<p>
Both have some overlapping in features, such as Projectile provides
basic tag navigation in project, but in general they support each
other. For our basic usage, we use EDE for smart completion as in
previous section and Projectile to navigate our project
effortlessly.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Code refactoring</h2>
<div class="outline-text-2" id="text-11">
<p>
You can use this package, <a href="https://github.com/tuhdo/semantic-refactor">Semantic Refactor</a> for refactoring in small scale. The
package offers the following feature:
</p>

<ul class="org-ul">
<li>Context-sensitive menu offers appropriate refactoring actions
</li>
<li>Generate class implementation (also handles nested class and class template)
</li>
<li>Generate class getters and setters
</li>
<li>Generate function implementation (also handles function template)
</li>
<li>Generate function prototype
</li>
<li>Convert function to function pointer
</li>
<li>Convert function to function parameter
</li>
<li>Move semantic units (class, function, variable)
</li>
<li>Extract function with proper type information
</li>
<li>Precise local variable rename
</li>
</ul>

<p>
<a href="https://github.com/tuhdo/semantic-refactor/blob/master/srefactor-demos/demos.org">Please follow this link for demos</a>.
</p>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><a id="navigate-system-include-path" name="navigate-system-include-path"></a><span class="section-number-2">12</span> Navigate system include path</h2>
<div class="outline-text-2" id="text-12">
<p>
Up until now we were only navigating code in a project using <code>GNU
Global</code>. How about jumping to <b>system include headers</b>? You have a few
options that I know:
</p>
</div>

<div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1"><a id="semantic-ia-fast-jump" name="semantic-ia-fast-jump"></a><span class="section-number-3">12.1</span> Using <code>Semantic</code> with <code>semantic-ia-fast-jump</code> command</h3>
<div class="outline-text-3" id="text-12-1">
<p>
Semantic provides a jump command based on the parsed tags produced by
the Semantic C/C++ parser. To jump to any code in system include path,
you must first tell Semantic where it is:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(semantic-add-system-include <span style="color: #cdcd00;">"/usr/local/include"</span>)
(semantic-add-system-include <span style="color: #cdcd00;">"~/linux/include"</span>)
</pre>
</div>

<p>
Then, if point is on an include header like <code>#include &lt;iostream&gt;</code> or a
tag inside <code>iostream</code>, executing the command <code>semantic-ia-fast-jump</code>
will jump to into header file or jump to the tag at point earlier that
is inside <code>iostream</code>. If the tag is actually within <code>iostream</code> but you
do not include <code>iostream</code>, Semantic won't be able to jump because it
sees no appropriate header that contains the tag.
</p>

<p>
The function <code>semantic-add-system-include</code> will add your include paths
to <code>semantic-c-dependency-system-include-path</code> variable. By default,
it only contains <code>/usr/include</code>. You can add more such as
<code>/usr/local/include</code> or your own project, such as
<code>~/linux/include</code>.
</p>

<p>
The disadvantage of using Semantic is that for it may take brief while
to parse, but for once; the next time you can jump to parsed source
instantly.
</p>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2"><a id="navigate-system-include-gnu-global" name="navigate-system-include-gnu-global"></a><span class="section-number-3">12.2</span> Using generated database from <code>GNU Global</code></h3>
<div class="outline-text-3" id="text-12-2">
<p>
<code>GNU Global</code> has an environment variable named <code>GTAGSLIBPATH</code>. This
variable holds GTAGS database of external libraries that your project
depends on but not inside your project. For example, your project may
rely on system headers such as <code>stdio.h</code>, <code>stdlib.h</code>&#x2026; but these
headers are internal to your project. However, remember that you can
only jump to tag definitions of external dependencies, and nothing
else (such as files or references). But, again, once you are inside
the external library, you can start jumping around sicne it becomes
your current project.
</p>

<p>
To make <code>GNU Global</code> sees your system headers, follow these steps:
</p>

<ul class="org-ul">
<li>Export this environment variable in your shell init file, such as
<code>.bashrc</code> or <code>.zshrc</code>:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #cd00cd;">export</span> <span style="color: #00cdcd;">GTAGSLIBPATH</span>=$<span style="color: #00cdcd;">HOME</span>/.gtags/
</pre>
</div>

<ul class="org-ul">
<li>Execute these commands in your terminal:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #cdcd00;"># </span><span style="color: #cdcd00;">Create a directory for holding database, since</span>
<span style="color: #cdcd00;"># </span><span style="color: #cdcd00;">you cannot create a database in your system paths</span>
mkdir ~/.gtags

<span style="color: #cdcd00;"># </span><span style="color: #cdcd00;">Create symbolic links to your external libraries</span>
ln -s /usr/include usr-include
ln -s /usr/local/include/ usr-local-include

<span style="color: #cdcd00;"># </span><span style="color: #cdcd00;">Generate GNU Global database</span>
gtags -c
</pre>
</div>

<p>
The <code>-c</code> option tells GNU Global to generate tag database in compact
format. It is necessary because if your project contains C++ headers like
<code>Boost</code>, without <code>-c</code> your GTAGS database can be more than 1 GB. Same
goes for <code>ctags</code>. The <code>GNU Global</code> devs explained that it is because
the GTAGS database includes the image of tagged line, and the <code>Boost</code>
headers have a lot of very long lines.
</p>

<p>
After all the above steps, restart with a shell loaded with that
variable. To verify Emacs gets the variable, <code>M-x getenv</code> and enter
<code>GTAGSLIBPATH</code> and see if your predefined value is
available. Executing <code>ggtags-find-tag-dwim</code> or <code>helm-gtags-dwim</code> jumps
to the definition of a system tag like a normal tag.
</p>

<p>
The disadvantage of using <code>GNU Global</code> is that currently it cannot
include files without extension. In the C++ system include directory
like <code>/usr/include/c++/4.8/</code>, it contains files without extension such
as <code>iostream</code>, <code>string</code>, <code>set</code>, <code>map</code>&#x2026;. so you can write <code>#include</code>
directives without having to append <code>.h</code> at the end. <code>GNU Global</code> devs
are considering to add support for this use case.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><a id="project-management-with-projectile" name="project-management-with-projectile"></a><span class="section-number-2">13</span> Project management with Projectile</h2>
<div class="outline-text-2" id="text-13">
<p>
<code>Projectile</code> is a project interaction library for Emacs. Its goal is to
provide a nice set of features operating on a project level without
introducing external dependencies(when feasible). For instance -
finding project files has a portable implementation written in pure
Emacs Lisp without the use of GNU find (but for performance sake an
indexing mechanism backed by external commands exists as well).
</p>

<p>
Projectile tries to be practical - portability is great, but if some
external tools could speed up some task substantially and the tools
are available, Projectile will leverage them.
</p>

<p>
By default, <code>git</code>, <code>mercurial</code>, <code>darcs</code> and <code>bazaar</code> are considered
projects. So are <code>lein</code>, <code>maven</code>, <code>sbt</code>, <code>scons</code>, <code>rebar</code> and
<code>bundler</code>. If you want to mark a folder manually as a project just
create an empty <code>.projectile</code> file in it.
</p>

<p>
You also install <code>Projectile</code> using MELPA and setup:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(projectile-global-mode)
</pre>
</div>

<p>
Prefix key of Projectile is <b>C-c p</b>. Some notable features:
</p>

<ul class="org-ul">
<li>Jump to any file in the project: <b>C-c p f</b>.
</li>
<li>Jump to any directory in the project: <b>C-c p d</b>.
</li>
<li>List buffers local to current project: <b>C-c p b</b>.
</li>
<li>Jump to recently visited files in project: <b>C-c p e</b>.
</li>
<li>Grep in project: <b>C-c p g s</b>
</li>
<li>Multi-occur in project buffers: <b>C-c p o</b>.
</li>
<li>Simple refactoring with text replace in current project: <b>C-c p r</b>.
</li>
<li>Switch visited projects (visited once an Projectile remembers): <b>C-c p p</b>.
</li>
</ul>

<p>
Useful commands for working with C/C++ projects:
</p>

<ul class="org-ul">
<li>Run compilation command at project root: <b>C-c p c</b>. By default,
Projectile prompts the <code>make</code> command.
</li>

<li>Switch between <code>.h</code> and <code>.c</code> or <code>.cpp</code>: <b>C-c p a</b>. If the filename -
without file extension - of current editing buffer is part of other
files, those files are listed as well. If there is only one file
with the same name but different extension, switch immediately. Here
is a demo:
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/projectile-find-other-file.gif"><img src="static/c-ide/projectile-find-other-file.gif" alt="projectile-find-other-file.gif" /></a>
</p>
</div>

<p>
There are more, you can find it in <a href="http://tuhdo.github.io/helm-projectile.html">my Projectile guide</a>. You can also
run <b>C-c p C-h</b> for a list of commands with <b>C-c p</b> prefix.
</p>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><a id="source-code-information" name="source-code-information"></a><span class="section-number-2">14</span> Source code information</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1"><a id="global-semantic-idle-summary-mode" name="global-semantic-idle-summary-mode"></a><span class="section-number-3">14.1</span> Command: <code>global-semantic-idle-summary-mode</code></h3>
<div class="outline-text-3" id="text-14-1">
<p>
This mode, when enabled, displays function interface in the
minibuffer:
</p>


<div class="figure">
<p><a href="static/func_args.jpg"><img src="static/func_args.jpg" alt="func_args.jpg" /></a>
</p>
</div>

<p>
It works well for C but not C++, since C++ can overload function and
<code>semantic-idle-summary-mode</code> can only display one interface at a
time. Since this mode is part of Semantic, it also relies on
SemanticDB that is created from parsing source files.
</p>

<p>
Setup:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-semantic-idle-summary-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-14-2" class="outline-3">
<h3 id="sec-14-2"><a id="global-semantic-stickyfunc-mode" name="global-semantic-stickyfunc-mode"></a><span class="section-number-3">14.2</span> Command: <code>global-semantic-stickyfunc-mode</code></h3>
<div class="outline-text-3" id="text-14-2">
<p>
When enable, this mode shows the function point is currently in at the
first line of the current buffer. This is useful when you have a very
long function that spreads more than a screen, and you don't have to
scroll up to read the function name and then scroll down to original
position.
</p>

<p>
<a href="https://github.com/tuhdo/semantic-stickyfunc-enhance#features">Please click here for demos</a>.
</p>

<p>
Setup:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'semantic-default-submodes 'global-semantic-stickyfunc-mode)
</pre>
</div>

<p>
One of the problem with current <code>semantic-stickyfunc-mode</code> is that it
does not display all parameters that are scattered on multiple lines.
This package handles that problem: <a href="https://github.com/tuhdo/semantic-stickyfunc-enhance">semantic-stickyfunc-enhance</a>. Extra:
stock <code>semantic-stickyfunc-mode</code> does not include assigned values to
function parameters of Python. This package also fixed that problem.
You can click the link to see demos.
</p>

<p>
You can install the package via MELPA and load it:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">stickyfunc-enhance</span>)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-14-3" class="outline-3">
<h3 id="sec-14-3"><a id="ggtags-and-eldoc" name="ggtags-and-eldoc"></a><span class="section-number-3">14.3</span> Using <code>ggtags</code> + <code>eldoc</code></h3>
<div class="outline-text-3" id="text-14-3">
<p>
You can also use <code>ggtags</code> for displaying function interface at point
in minibuffer:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-local eldoc-documentation-function #'ggtags-eldoc-function)
</pre>
</div>

<p>
However, it won't have syntax highlighting.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><a id="source-code-documentation" name="source-code-documentation"></a><span class="section-number-2">15</span> Source code documentation</h2>
<div class="outline-text-2" id="text-15">
</div>
<div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1"><a id="documentation-man" name="documentation-man"></a><span class="section-number-3">15.1</span> Command: <code>man</code></h3>
<div class="outline-text-3" id="text-15-1">
<p>
To read the documentation for symbol at point or a man entry of your
choice, invoke <code>M-x man</code>.
</p>
</div>
</div>
<div id="outline-container-sec-15-2" class="outline-3">
<h3 id="sec-15-2"><a id="documentation-helm-man-woman" name="documentation-helm-man-woman"></a><span class="section-number-3">15.2</span> Command: <code>helm-man-woman</code></h3>
<div class="outline-text-3" id="text-15-2">
<p>
If you use Helm, you should be able to use the command
<code>helm-man-woman</code>, which is bound to <b>C-c h m</b> if you follow <a href="http://tuhdo.github.io/helm-intro.html">my Helm
guide</a>. The full guide for the command is <a href="http://tuhdo.github.io/helm-intro.html#sec-10">here</a>.
</p>


<div class="figure">
<p><a href="static/part3/helm-man-woman.gif"><img src="static/part3/helm-man-woman.gif" alt="helm-man-woman.gif" /></a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><a id="source-code-editing" name="source-code-editing"></a><span class="section-number-2">16</span> Source code editing</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-sec-16-1" class="outline-3">
<h3 id="sec-16-1"><a id="source-code-folding" name="source-code-folding"></a><span class="section-number-3">16.1</span> Folding</h3>
<div class="outline-text-3" id="text-16-1">
<p>
Emacs has a minor mode called <code>hs-minor-mode</code> that allows users to
fold and hide blocks of text. Blocks are defined by regular
expressions which match the start and end of a text region. For
example, anything in between <code>{</code> and <code>}</code> is a block. The regular
expressions are defined in <code>hs-special-modes-alist</code>.
</p>

<p>
Setup for C/C++:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'c-mode-common-hook   'hs-minor-mode)
</pre>
</div>

<p>
Default key bindings:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" align="center">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Binding</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>C-c @ C-c</b></td>
<td class="left"><code>hs-toggle-hiding</code></td>
<td class="left">Toggle hiding/showing of a block</td>
</tr>

<tr>
<td class="left"><b>C-c @ C-h</b></td>
<td class="left"><code>hs-hide-block</code></td>
<td class="left">Select current block at point and hide it</td>
</tr>

<tr>
<td class="left"><b>C-c @ C-l</b></td>
<td class="left"><code>hs-hide-level</code></td>
<td class="left">Hide all block with indentation levels below this block</td>
</tr>

<tr>
<td class="left"><b>C-c @ C-s</b></td>
<td class="left"><code>hs-show-block</code></td>
<td class="left">Select current block at point and show it.</td>
</tr>

<tr>
<td class="left"><b>C-c @ C-M-h</b></td>
<td class="left"><code>hs-hide-all</code></td>
<td class="left">Hide all top level blocks, displaying only first and last lines.</td>
</tr>

<tr>
<td class="left"><b>C-c @ C-M-s</b></td>
<td class="left"><code>hs-show-all</code></td>
<td class="left">Show everything</td>
</tr>
</tbody>
</table>

<p>
Demo:
</p>

<ul class="org-ul">
<li>Command: <code>hs-toggle-hiding</code>
</li>
</ul>


<div class="figure">
<p><a href="static/c-ide/hs-toggle-hiding.gif"><img src="static/c-ide/hs-toggle-hiding.gif" alt="hs-toggle-hiding.gif" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-16-2" class="outline-3">
<h3 id="sec-16-2"><a id="source-code-narrowing" name="source-code-narrowing"></a><span class="section-number-3">16.2</span> Narrowing</h3>
<div class="outline-text-3" id="text-16-2">
<p>
Narrowing means making only a text portion in current buffer
visible. Narrowing is useful when you want to perform text editing on
a small part of the buffer without affecting the others. For example,
you want to delete all <code>printf</code> statements in current functions, using
<code>flush-lines</code> command. But if you do so, you will also delete <code>printf</code>
outside the current function, which is undesirable. By narrowing, you
can safely remove all those <code>printf</code> and be certain that nothing else
is changed accidentally.
</p>

<p>
Default key bindings:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" align="center">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Binding</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>C-x n d</b></td>
<td class="left"><code>narrow-to-defun</code></td>
<td class="left">Narrow buffer to current function at point</td>
</tr>

<tr>
<td class="left"><b>C-x n n</b></td>
<td class="left"><code>narrow-to-region</code></td>
<td class="left">Narrow buffer to active region</td>
</tr>

<tr>
<td class="left"><b>C-x n w</b></td>
<td class="left"><code>widen</code></td>
<td class="left">Widen buffer</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-16-3" class="outline-3">
<h3 id="sec-16-3"><a id="source-code-indentation" name="source-code-indentation"></a><span class="section-number-3">16.3</span> Identation</h3>
<div class="outline-text-3" id="text-16-3">
</div>
<div id="outline-container-sec-16-3-1" class="outline-4">
<h4 id="sec-16-3-1"><a id="indentation-default-c-style" name="indentation-default-c-style"></a><span class="section-number-4">16.3.1</span> Setup default C style</h4>
<div class="outline-text-4" id="text-16-3-1">
<p>
Emacs offers some popular C coding styles. Select the one suitable for
you:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Available C style:</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;gnu&#8221;: The default style for GNU projects</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;k&amp;r&#8221;: What Kernighan and Ritchie, the authors of C used in their book</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;bsd&#8221;: What BSD developers use, aka &#8220;Allman style&#8221; after Eric Allman.</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;whitesmith&#8221;: Popularized by the examples that came with Whitesmiths C, an early commercial C compiler.</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;stroustrup&#8221;: What Stroustrup, the author of C++ used in his book</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;ellemtel&#8221;: Popular C++ coding standards as defined by &#8220;Programming in C++, Rules and Recommendations,&#8221; Erik Nyquist and Mats Henricson, Ellemtel</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;linux&#8221;: What the Linux developers use for kernel development</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;python&#8221;: What Python developers use for extension modules</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;java&#8221;: The default style for java-mode (see below)</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">&#8220;user&#8221;: When you want to define your own style</span>
(setq
 c-default-style <span style="color: #cdcd00;">"linux"</span> <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">set style to "linux"</span>
 )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-3-2" class="outline-4">
<h4 id="sec-16-3-2"><a id="setup-indentation" name="setup-indentation"></a><span class="section-number-4">16.3.2</span> Setup indentation</h4>
<div class="outline-text-4" id="text-16-3-2">
<p>
By default, Emacs won't indent when press <b>RET</b> because the command
bound to <b>RET</b> is newline. You can enable automatic indentation by
binding <b>RET</b> to <code>newline-and-indent</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #cdcd00;">"RET"</span>) 'newline-and-indent)  <span style="color: #cdcd00;">; </span><span style="color: #cdcd00;">automatically indent when press RET</span>
</pre>
</div>

<p>
When working with source code, we must pay attention to trailng
whitespace. It is always useful to view whitespace in current buffer
before committing your code.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">activate whitespace-mode to view all whitespace characters</span>
(global-set-key (kbd <span style="color: #cdcd00;">"C-c w"</span>) 'whitespace-mode)

<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">show unncessary whitespace that can mess up your diff</span>
(add-hook 'prog-mode-hook (<span style="color: #b4fa70;">lambda</span> () (interactive) (setq show-trailing-whitespace 1)))

<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">use space to indent by default</span>
(setq-default indent-tabs-mode nil)

<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">set appearance of a tab that is represented by 4 spaces</span>
(setq-default tab-width 4)
</pre>
</div>

<p>
To clean up trailing whitespace, you can also run <code>whitespace-cleanup</code>
command.
</p>

<p>
To convert between <b>TAB</b> and <b>space</b>, you also have two commands:
<code>tabify</code> to turn an active region to use <b>TAB</b> for indentation, and
<code>untabify</code> to turn an active region to use <b>space</b> for indentation.
</p>
</div>
</div>

<div id="outline-container-sec-16-3-3" class="outline-4">
<h4 id="sec-16-3-3"><a id="clean-aindent-mode" name="clean-aindent-mode"></a><span class="section-number-4">16.3.3</span> Package: <code>clean-aindent-mode</code></h4>
<div class="outline-text-4" id="text-16-3-3">
<p>
When you press <b>RET</b> to create a newline and got indented by
<code>eletric-indent-mode</code>, you have appropriate whitespace for
indenting. But, if you leave the line blank and move to the next line,
the whitespace becomes useless. This package helps clean up unused
whitespace.
</p>

<p>
View this <a href="http://www.emacswiki.org/emacs/CleanAutoIndent">Emacswiki page</a> for more details.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Package: clean-aindent-mode</span>
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">clean-aindent-mode</span>)
(add-hook 'prog-mode-hook 'clean-aindent-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-3-4" class="outline-4">
<h4 id="sec-16-3-4"><a id="dtrt-indent" name="dtrt-indent"></a><span class="section-number-4">16.3.4</span> Package: <code>dtrt-indent</code></h4>
<div class="outline-text-4" id="text-16-3-4">
<p>
A minor mode that guesses the indentation offset originally used for
creating source code files and transparently adjusts the corresponding
settings in Emacs, making it more convenient to edit foreign files.
</p>

<p>
This package is really useful when you have to work on many different
projects (for example, your project consists of many git submodules)
that use different indentation format. One project might use <b>TAB</b>
for indentation; another project might use <b>space</b> for
indentation. Having to manually switch between <b>TAB</b> and <b>space</b> is
tiresome. We should let Emacs take care of it automatically. This
package does exactly that. However, if a project mixes <b>TAB</b> and
<b>space</b>, then the package will have a hard time to detect. But then
again, if you work on such project, it doesn't matter anyway.
</p>

<p>
Setup:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Package: dtrt-indent</span>
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">dtrt-indent</span>)
(dtrt-indent-mode 1)
</pre>
</div>

<p>
If you use Semantic for code completion, you may one to turn off
<code>dtrt-indent</code> messages since Semantic may visit many files for
parsing, and each file entered a message from <code>dtrt-indent</code> is printed
in echo area and might become a constant annoyance.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq dtrt-indent-verbosity 0)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-16-3-5" class="outline-4">
<h4 id="sec-16-3-5"><a id="ws-butler" name="ws-butler"></a><span class="section-number-4">16.3.5</span> Package: <code>ws-butler</code></h4>
<div class="outline-text-4" id="text-16-3-5">
<p>
<code>ws-butler</code> helps managing whitespace on every line of code written or
edited, in an unobtrusive, help you write clean code without noisy
whitespace effortlessly. That is:
</p>

<ul class="org-ul">
<li>Only lines touched get trimmed. If the white space at end of buffer
is changed, then blank lines at the end of buffer are truncated
respecting require-final-newline.
</li>

<li>Trimming only happens when saving.
</li>
</ul>

<p>
With <code>clean-aindent-mode</code> and <code>dtrt-indent</code> and <code>ws-butler</code>, you
could totally forget about whitespace. If you are careful, turn on
<code>whitespace-mode</code> (bound to <code>C-c w</code> above) and check for whitespace
before committing.
</p>

<p>
Setup:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Package: ws-butler</span>
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">ws-butler</span>)
(add-hook 'c-mode-common-hook 'ws-butler-mode)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-16-4" class="outline-3">
<h3 id="sec-16-4"><a id="yasnippet" name="yasnippet"></a><span class="section-number-3">16.4</span> Code template using <code>yasnippet</code></h3>
<div class="outline-text-3" id="text-16-4">
<p>
YASnippet is a template system for Emacs. It allows you to type an
abbreviation and automatically expand it into function
templates. Bundled language templates include: C, C++, C#, Perl,
Python, Ruby, SQL, LaTeX, HTML, CSS and more. The snippet syntax is
inspired from TextMate's syntax, you can even import most TextMate
templates to YASnippet.
</p>

<p>
Setup:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Package: yasnippet</span>
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">yasnippet</span>)
(yas-global-mode 1)
</pre>
</div>

<p>
<span class="underline">Usage</span>:
</p>

<p>
In major modes where <b>yasnippet</b> has snippets available,
typing a certain keyword and <b>TAB</b> insert a predefined snippet. For
example, in a C buffer, if you type <code>for</code> and <b>TAB</b>, it expands to:
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #b4fa70;">for</span> (i = 0; i &lt; N; i++) {
    ...point will be here....
}
</pre>
</div>

<p>
You can view supported snippets <a href="https://github.com/AndreaCrotti/yasnippet-snippets/tree/master">here</a>.
</p>
</div>
</div>

<div id="outline-container-sec-16-5" class="outline-3">
<h3 id="sec-16-5"><a id="smartparens" name="smartparens"></a><span class="section-number-3">16.5</span> Package: <code>smartparens</code></h3>
<div class="outline-text-3" id="text-16-5">
<p>
<code>smartparens</code> is a minor mode that provides many features for
manipulating pairs. Pair can be simple as parentheses or brackets, or
can be programming tokens such as <code>if</code> &#x2026; <code>fi</code> or <code>if</code> &#x2026; <code>end</code> in
many languages. The most basic and essential feature is automatic
closing of a pair when user inserts an opening one.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Package: smartparens</span>
(<span style="color: #b4fa70;">require</span> '<span style="color: #e9b2e3;">smartparens-config</span>)
(show-smartparens-global-mode +1)
(smartparens-global-mode 1)

<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">when you press RET, the curly braces automatically</span>
<span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">add another newline</span>
(sp-with-modes '(c-mode c++-mode)
  (sp-local-pair <span style="color: #cdcd00;">"{"</span> nil <span style="color: #cd00cd;">:post-handlers</span> '((<span style="color: #cdcd00;">"||\n[i]"</span> <span style="color: #cdcd00;">"RET"</span>)))
  (sp-local-pair <span style="color: #cdcd00;">"/*"</span> <span style="color: #cdcd00;">"*/"</span> <span style="color: #cd00cd;">:post-handlers</span> '((<span style="color: #cdcd00;">" | "</span> <span style="color: #cdcd00;">"SPC"</span>)
                                            (<span style="color: #cdcd00;">"* ||\n[i]"</span> <span style="color: #cdcd00;">"RET"</span>))))
</pre>
</div>

<p>
For complete documentation, please refer to <a href="https://github.com/Fuco1/smartparens/wiki#information-for-new-users">Smartparens manual</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><a id="compilation-support" name="compilation-support"></a><span class="section-number-2">17</span> Compilation Support</h2>
<div class="outline-text-2" id="text-17">
<p>
Compilation mode turns each error message in the buffer into a
hyperlink. You can click on each error, or execute a key binding like
<b>RET</b> to jump to the location of that error.
</p>

<p>
The following key bindings are available:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" align="center">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>C-o</b></td>
<td class="left">Display matched location, but <b>do not</b> switch point to matched buffer</td>
</tr>

<tr>
<td class="left"><b>M-n</b></td>
<td class="left">Move to next error message, but <b>do not</b> visit error location</td>
</tr>

<tr>
<td class="left"><b>M-p</b></td>
<td class="left">Move to next previous message, but <b>do not</b> visit error location</td>
</tr>

<tr>
<td class="left"><b>M-g n</b></td>
<td class="left">Move to next error message, visit error location</td>
</tr>

<tr>
<td class="left"><b>M-g p</b></td>
<td class="left">Move to previous error message, visit error location</td>
</tr>

<tr>
<td class="left"><b>RET</b></td>
<td class="left">Visit location of error at poiint</td>
</tr>

<tr>
<td class="left"><b>M-{</b></td>
<td class="left">Move point to the next error message or match occurring in a different file</td>
</tr>

<tr>
<td class="left"><b>M-}</b></td>
<td class="left">Move point to the previous error message or match occurring in a different file</td>
</tr>

<tr>
<td class="left"><b>q</b></td>
<td class="left">Quit <code>*compilation*</code> buffer</td>
</tr>
</tbody>
</table>

<p>
I usually execute the same compilation command many times. It's more
convenient if Emacs doesn't ask us to confirm every time we re-execute
a command:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #cdcd00;">"&lt;f5&gt;"</span>) (<span style="color: #b4fa70;">lambda</span> ()
                               (interactive)
                               (setq-local compilation-read-command nil)
                               (call-interactively 'compile)))
</pre>
</div>

<p>
If you want to enter a new command, add prefix argument before
pressing <code>&lt;f5&gt;</code>.
</p>

<p>
Demo:
</p>


<div class="figure">
<p><a href="static/c-ide/compilation-mode.gif"><img src="static/c-ide/compilation-mode.gif" alt="compilation-mode.gif" /></a>
</p>
</div>

<p>
As you can see, output in <code>*compilation*</code> buffer looks much better
than in plain terminal with colors and you can also interact with it.
</p>

<p>
You can also run other shell commands in here, not just compilation
commands. A really cool thing with <code>compilation-mode</code> is that it is
asynchronous. That is, if your source files contain errors, you don't
have to wait for the whole compilation process to finish. You can
examine the errors right away in the <code>*compilation*</code> buffer, while the
compilation process keeps going.
</p>

<p>
When you compile with <code>compilation-mode</code>, your shell output is
processed and highlighted with beautiful colors to easy your reading:
</p>


<div class="figure">
<p><a href="static/c-ide/compilation-compile.gif"><img src="static/c-ide/compilation-compile.gif" alt="compilation-compile.gif" /></a>
</p>
</div>

<p>
<b>TIP</b>: It is useful to open a Dired buffer of the project root and
store a window configuration that contains it into a register, so you
can always jump back to project root any where, any time and run
compilation command. If you do not use know how to use registers to
store window configurations, read it <a href="emacs-tutor.html">here</a>.
</p>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><a id="debugging" name="debugging"></a><span class="section-number-2">18</span> Debugging</h2>
<div class="outline-text-2" id="text-18">
</div>
<div id="outline-container-sec-18-1" class="outline-3">
<h3 id="sec-18-1"><a id="gdb-many-windows" name="gdb-many-windows"></a><span class="section-number-3">18.1</span> With GDB Many Windows</h3>
<div class="outline-text-3" id="text-18-1">

<p>
Emacs has built-in frontend support for GDB that provides IDE-like
interface. It has a layout like this:
</p>


<div class="figure">
<p><a href="static/c-ide/gdb-many-windows.gif"><img src="static/c-ide/gdb-many-windows.gif" alt="gdb-many-windows.gif" /></a>
</p>
</div>

<p>
Stock Emacs doesn't enable this layout by default. You have to
tell Emacs to always use <code>gdb-many-windows</code>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq
 <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">use gdb-many-windows by default</span>
 gdb-many-windows t

 <span style="color: #cdcd00;">;; </span><span style="color: #cdcd00;">Non-nil means display source file containing the main routine at startup</span>
 gdb-show-main t
 )
</pre>
</div>

<p>
Now, find a binary built for debugging, and start GDB by <code>M-x
gdb</code>. Emacs prompts asking you how to run <code>gdb</code>. By default, the
prompt looks like this:
</p>


<div class="figure">
<p><a href="static/c-ide/gdb-prompt.gif"><img src="static/c-ide/gdb-prompt.gif" alt="gdb-prompt.gif" /></a>
</p>
</div>

<p>
To use <code>gdb-many-windows</code>, you must always supply the <b>-i=mi</b> argument
to gdb, otherwise <code>gdb-many-windows</code> won't work. By default, as you've
seen the layout of <code>gdb-many-windows</code> above, you have the following
buffers visible on your screen (ignore the first row):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">1. GUD interaction buffer</td>
<td class="left">2. Locals/Registers buffer</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">3. Primary Source buffer</td>
<td class="left">4. I/O buffer for debugging program</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">5. Stack buffer</td>
<td class="left">6. Breakpoints/Threads buffer</td>
</tr>
</tbody>
</table>

<p>
Each cell coressponds to the following commands:
</p>

<ul class="org-ul">
<li><code>gdb-display-gdb-buffer</code> <b>(Cell 1)</b>: This is where you enter <code>gdb</code>
commands, the same as in terminal. When you kill this buffer, other
GDb buffers are also killed and debugging session is terminated.
</li>

<li><code>gdb-display-locals-buffer</code> <b>(Cell 2)</b>: display local variables and
its values in current stack frame. Please refer to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Source-Buffers.html#Source-Buffers">GNU Manual -
Other GDB Buffers</a> for usage of the buffer.
</li>

<li><code>gdb-display-registers-buffer</code> <b>(Cell 2)</b>: registers values are
displayed here. Please refer to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Source-Buffers.html#Source-Buffers">GNU Manual - Other GDB Buffers</a> for
usage of the buffer.
</li>

<li>Your source buffer <b>(Cell 3)</b>: Your source code for stepping through
out the debugging session. Please refer to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Source-Buffers.html#Source-Buffers">GNU Manual - Source
Buffers</a> for usage of the buffer.
</li>

<li><code>gdb-display-io-buffer</code> <b>(Cell 4)</b>: This is where your program
displays output and accepts input. In stock GDB (Command Line
Interface), you enter input whenever a program asks for one under
GDB prompt. Using <code>gdb-many-windows</code>, <b>you must enter program input
here</b>.
</li>

<li><code>gdb-display-stack-buffer</code> <b>(Cell 5)</b>: Display function call
stack. Please refer to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Stack-Buffer.html#Stack-Buffer">GNU Manual - Stack buffer</a> for usage.
</li>

<li><code>gdb-display-breakpoints-buffer</code> <b>(Cell 6)</b>: Display a list of
breakpoints. Please refere to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Breakpoints-Buffer.html#Breakpoints-Buffer">GNU Manual - Breakpoints Buffer</a> for
usage of the buffer.
</li>

<li><code>gdb-display-threads-buffer</code> (Cell 6): Display running threads in
your programs. Please refer to <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Threads-Buffer.html#Threads-Buffer">GNU Manual - Threads Buffer</a> and
<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Multithreaded-Debugging.html#Multithreaded-Debugging">Multithreaded Debugging</a> for usage of the buffer.
</li>
</ul>

<p>
There are two useful commands that are not visible in
<code>gdb-many-windows</code>:
</p>

<ul class="org-ul">
<li><code>gdb-display-disassembly-buffer</code>: displays the current frame as
assembly code.
</li>
<li><code>gdb-display-memory-buffer</code>: displays a portion of program memory.
</li>
</ul>

<p>
There are another variants of the above buffers, with <code>gdb-frame</code>
prefix instead of <code>gdb-display</code>. When you run commands with
<code>gdb-frame</code> prefix, the buffers are opened in a new frame instead of
occupying an existing window. This is useful when you have 2 monitors,
one is for the standard <code>gdb-many-windows</code> layout and another one is
for displaying disassembly buffer and memory buffer in a separate
frame.
</p>
</div>
</div>

<div id="outline-container-sec-18-2" class="outline-3">
<h3 id="sec-18-2"><a id="gud-gdb" name="gud-gdb"></a><span class="section-number-3">18.2</span> With Grand Unified Debugger - GUD</h3>
<div class="outline-text-3" id="text-18-2">
<p>
The <b>Grand Unified Debugger</b>, or GUD for short, is an Emacs major mode
for debugging. It works on top of command line debuggers. GUD handles
interaction with gdb, dbx, xdb, sdb, perldb, jdb, and pdb, by
default. Emacs provides unified key bindings for those debuggers. We
only concern about GDB in this guide.
</p>

<p>
GUD works by sending text commands to a debugger subprocess, and
record its output. As you debug the program, Emacs displays relevant
source files with an arrow in the left fringe indicating the current
execution line. GUD is simple and stable. When starting GUD, you only
have a GDB command buffer and your source file. If you like
simplicity, you can use GUD. However, you can still use other
<code>gdb-display-</code> or <code>gdb-frame-</code> variants listed in previous section
when needed.
</p>


<div class="figure">
<p><a href="static/c-ide/gud.gif"><img src="static/c-ide/gud.gif" alt="gud.gif" /></a>
</p>
</div>

<p>
As you can see, the default Emacs interface also includes a menu for
regular debugging operations, such as Stop, Run, Continue, Next Line,
Up/Down Stack&#x2026;
</p>

<p>
Refer to a list of commands supported by GUD at <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Commands-of-GUD.html#Commands-of-GUD">GNU Emacs Manual -
Commands of GUD</a>. Note that these key bindings not only work with GDB,
but any debuggers supported by GUD, since it's a <b>Grand Unified
Debugger</b>.
</p>

<p>
There's an Emacs packages that offers support for more debuggers:
<a href="https://github.com/rocky/emacs-dbgr">emacs-dbgr</a>. Here is <a href="https://github.com/rocky/emacs-dbgr/wiki/Debuggers-Supported">the list of supported debuggers</a>. If you have to
work with many languages, use <b>GUD</b>.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2016-12-09 Fri 12:23</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
